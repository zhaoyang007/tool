### 根据函数的调用关系就能知道源码中的大致结构

传参的地方，一个地方接收一个 function，另一个地方就要传入一个 function。

而且回调函数之间只有两层关系，再复杂的结构也可以拆解开成两层两层的关系，最终有互相依赖的函数回调关系的只有那两层。

解读复杂代码能力，尤其是复杂的函数回调关系的梳理。



### 框架类库插件源码分析
内部定义好构造函数的属性和方法，方法添加到原型上，然后使用了new构造函数的方式，我们使用的时候最终都会得到这个构造函数返回的实例对象，这个对象就拥有了框架内部构造函数上的属性和方法，我们就可以使用框架提供给我的功能了。使用的过程我们可以传入我们的配置，框架内部会根据配置来得到不同的功能。



### 逻辑和计算
逻辑是靠计算的结果去判断的。有时候不是逻辑复杂，而是计算复杂，它们之间相辅相成。



### 跨 js 文件的时序问题解决，用回调函数

```js
// page1.js
var ensureGetIdFlag = false
var ensureGetIdCallbackQueue = []
function ensureGetId (callback) {
  if (ensureGetIdFlag === true) {
    callback()
    return
  }
  ensureGetIdCallbackQueue.push(callback)
}
$.ajax({
  url: "",
  data: "",
  type: "",
  success: function (data) {
    ensureGetIdFlag = true
    for(var i = ensureGetIdCallbackQueue.length - 1; i >= 0; i--){
      ensureGetIdCallbackQueue[i](data)
    }
  }
})
// page2.js
ensureGetId(function (data) {})
```



### 技巧
看源码和代码的技巧，看到函数定义先不要管函数里面的内容，因为它还没有执行。执行这个函数的地方再回来看函数体内容。

在控制台中打印实例对象，最前面的名称是这个实例的构造函数的名称。然后下面显示的是这个实例对象的内容。利用这个可以很容易的找出一个库或框架或插件或工具中的实际的构造函数是什么。



### 工具

想要读取地址栏的中文，要用 decodeURI(window.location.href) 解析一下，不然是乱码。

form 表单提交，不受跨域限制。

API 它就是一个技术点，关注输入什么，输出什么就完了。



### bug调试
反复看 bug 效果，出现的时机。

顺序问题，把所有的关键时间点都要打印出来，如开始结束点。



### token登录验证
调登录接口后下发一个 token，由后端存入 cookie，以后每次接口请求再从 cookie 中读取这个 token 做验证。

调登录接口后下发一个 token，由前端存入 cookie，以后每次接口请求再从 cookie 中读取这个 token 做验证。

调登录接口后下发一个 token，由前端存入 cookie，以后每次接口请求将这个 token 放到 header 中，后端从 header 中取到 token 做验证。