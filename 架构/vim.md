# Vim编辑器

Vim（Vi[Improved]）编辑器是功能强大的跨平台文本文件编辑工具，继承自Unix系统的Vi编辑器，支持Linux/Mac OS X/Windows系统，利用它可以建立、修改文本文件。可以在终端输入下面的命令，进入Vim编辑程序：

```bash
vim filename
```

其中filename是要编辑器的文件的路径名。如果文件不存在，它将为你建立一个新文件。

# Vim编辑器的三种工作模式

## 编辑模式

1. 移动光标
   gg      将光标定位到文件第一行起始位置；
   G       将光标定位到文件最后一行起始位置；
   0       数字０，左移光标到本行的开始；
   $       右移光标，到本行的末尾；
   ^       移动光标，到本行的第一个非空字符。

2. 搜索
   /str1   正向搜索字符串 str1
   n       继续搜索，找出 str1 字符串下次出现的位置
   N       继续搜索，找出 str1 字符串上一次出现的位置
   ?str2   反向搜索字符串 str2 

3. 删除
   x       删除光标所指向的当前字符；
   dd      删除光标所在行，并去除空隙；

4. 复制
   yy      复制当前行到内存缓冲区；
   nyy     复制 n 行内容到内存缓冲区；
   “+nyy   复制 n 行到操作系统的粘贴板。

5. 粘贴
   p       小写字母 p，将缓冲区的内容粘贴到光标的后面；
   P       大写字母 P，将缓冲区的内容粘贴到光标的前面；
   通常，小写命令在光标的后面进行操作，大写命令在光标的前面进行操作。

6. 撤销和重复
   u       撤消前一条命令的结果；
   .       重复最后一条修改正文的命令。

## 插入模式

1. 进入插入模式：在编辑模式下正确定位光标之后，可用以下命令切换到插入模式

   a       在光标右侧插入正文
   o       在光标所在行的下一行增添新行

2. 退出插入模式：按 ESC 键或组合键 Ctrl+[ ，退出插入模式之后，将会进入编辑模式 。

## 命令模式

在Vim的命令模式下，可以使用复杂的命令。在编辑模式下键入 : ，光标就跳到屏幕最后一行，并在那里显示冒号，此时已进入命令模式。命令模式又称 末行模式 ，用户输入的内容均显示在屏幕的最后一行，按回车键，Vim 执行命令。

:e file  编辑新文件 file 代替原有内容
:f file  将当前文件重命名为 file
:w       保存当前编辑的文件
:w file  将当前文件另存为 file
ZZ       在编辑模式下退出Vim编辑程序，该命令保存对正文所作的修改，覆盖原始文件
:q       在未作修改的情况下退出
:q!      放弃所有修改，退出编辑程序
:wq      保存并退出
:/str/   正向搜索，将光标移到下一个包含字符串 str 的行
:s/str1/str2/g      用字符串 str2 替换行中所有出现的字符串 str1
:1,$ s/str1/str2/g  用字符串 str2 替换正文中所有出现的字符串 str1
:%s/str1/&/gn       统计当前文件中字符串 str1 出现的次数

# 与外部工具集成

Vim可以与许多外部程序集成，功能十分强大，比如 diff , ctags , sort , xxd 等等，下面选取几个简单介绍一下。
vimdiff file1 file2

即可在Vim里分屏显示两个文件内容的对比结果，对文件内容差异部分进行高亮标记，还可以同步滚动两个文件内容，更可以实时修改文件内容，方便程度和用户体验大大提高。

选项设置
:set number	 设置该选项，则显示正文行号